@using System.Timers

@if (isLoading)
{
    <div class="global-loading-overlay">
        <img src="images/Logos/logo-main.png" alt="IQ Game Logo" class="breathing-logo" />
    </div>
}
else
{
    <Router AppAssembly="@typeof(App).Assembly">
        <Found Context="routeData">
            <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
            <FocusOnNavigate RouteData="@routeData" Selector="h1" />
        </Found>
        <NotFound>
            <LayoutView Layout="typeof(MainLayout)">
                <p class="text-center mt-5">الصفحة غير موجودة</p>
            </LayoutView>
        </NotFound>
    </Router>
}

@code {
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        // Simulate loading for 0.5 seconds
        await Task.Delay(500);
        isLoading = false;
        StateHasChanged();
    }
}

<style>
.global-loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #ede3f7;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
}
.breathing-logo {
    width: 160px;
    height: 160px;
    animation: breathe 2.2s ease-in-out infinite;
    opacity: 0.85;
}
@@keyframes breathe {
    0% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.12); opacity: 1; }
    100% { transform: scale(1); opacity: 0.7; }
}
</style>
